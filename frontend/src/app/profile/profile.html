<div class="profile-container">

  <div class="card identity-card">
    <div class="avatar-wrapper">
      <img [src]="'https://ui-avatars.com/api/?background=764ba2&color=fff&name=' + (profileForm.get('firstName')?.value || 'User') + '+' + (profileForm.get('lastName')?.value || '')"
     alt="User Avatar"
     class="avatar">
    </div>

    <h2>{{ profileForm.get('firstName')?.value }} {{ profileForm.get('lastName')?.value }}</h2>

    <span class="role-badge"
          [ngClass]="{'admin': userRole === 'ADMIN', 'user': userRole === 'USER'}">
      {{ userRole || 'USER' }}
    </span>

    <p class="status" >ðŸŸ¢ Active Now</p>
  </div>

  <div class="card details-card">
    <div class="header">
      <h3>Profile Details</h3>
      <button type="button" (click)="toggleEdit()" class="btn-secondary">
        {{ isEditing ? 'Cancel' : 'Edit Profile' }}
      </button>
    </div>

    <form [formGroup]="profileForm" (ngSubmit)="saveProfile()">

      <div class="form-group">
        <label>First Name</label>
        <input type="text"
               formControlName="firstName"
               [readonly]="!isEditing"
               [class.editable]="isEditing">
        <small *ngIf="profileForm.get('firstName')?.invalid && isEditing" class="error">
          Name is required (min 2 chars).
        </small>
      </div>

      <div class="form-group">
        <label>Last Name</label>
        <input type="text"
               formControlName="lastName"
               [readonly]="!isEditing"
               [class.editable]="isEditing">
      </div>

      <div class="form-group">
        <label>Email</label>
        <input type="email"
               formControlName="email"
               [readonly]="!isEditing"
               [class.editable]="isEditing">
         <small *ngIf="profileForm.get('email')?.invalid && isEditing" class="error">
          Valid email is required.
        </small>
      </div>

      <button *ngIf="isEditing"
              type="submit"
              class="btn-primary"
              [disabled]="profileForm.invalid">
        Save Changes
      </button>
    </form>
  </div>

</div>
